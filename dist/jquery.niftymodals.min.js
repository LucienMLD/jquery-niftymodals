/*!
 * jquery.niftymodals v1.1.0 (https://github.com/foxythemes/jquery-niftymodals)
 * Copyright 2015 Foxy Themes 
 * Licensed under MIT license 
 */

!function(a){"use strict";a.fn.niftyModal=function(b){var c={overlaySelector:".md-overlay",closeSelector:".md-close",classAddAfterOpen:"md-show",modalAttr:"data-modal",perspectiveClass:"md-perspective",perspectiveSetClass:"md-setperspective",data:!1,beforeOpen:!1,afterOpen:!1,beforeClose:!1,afterClose:!1},d={},e={},f={init:function(b){return this.each(function(){d=a.extend({},c,b),e.domEl=this,d.data!==!1&&(e.data=b.data),g.showModal(this)})},toggle:function(b){return this.each(function(){d=a.extend({},c,b);var e=a(this);e.hasClass(d.classAddAfterOpen)?g.removeModal(e):g.showModal(e)})},show:function(b){return d=a.extend({},c,b),this.each(function(){var b=a(this);if("function"==typeof d.beforeOpen){var c=d.beforeOpen(e);if(c===!1)return!1}g.showModal(b)})},hide:function(b){return d=a.extend({},c,b),this.each(function(){g.removeModal(a(this))})}},g={removeModal:function(b){var c=a(b);c.removeClass(d.classAddAfterOpen),c.css({perspective:"1300px"}),c.trigger("hide")},showModal:function(b){var c=a(b),f=a(d.overlaySelector),h=a(d.closeSelector,b);c.addClass(d.classAddAfterOpen,function(a){"function"==typeof d.afterOpen&&d.afterOpen(e)}),f.on("click",function(a){if("function"==typeof d.beforeClose){var c=d.beforeClose(e,a);if(c===!1)return!1}g.removeModal(b),f.off("click"),"function"==typeof d.afterClose&&d.afterClose(e,a)}),setTimeout(function(){c.css({perspective:"none"}),c.height()%2!==0&&c.css({height:c.height()+1})},500),h.on("click",function(a){if("function"==typeof d.beforeClose){var c=d.beforeClose(e,a);if(c===!1)return!1}g.removeModal(b),f.off("click"),"function"==typeof d.afterClose&&d.afterClose(e,a),a.stopPropagation()}),c.trigger("show")}};return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error('Method "'+b+'" does not exist in niftyModal plugin!'):f.init.apply(this,arguments)}}(jQuery);